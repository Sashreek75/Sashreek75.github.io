<!DOCTYPE html>
<html lang="en">
<head>
  <title>Level 5: Function Fortress!</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="style.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
  <style>
body.function-fortress-bg {
  min-height: 100vh; margin: 0; padding: 0;
  font-family: 'Comic Sans MS', 'Comic Neue', cursive, sans-serif;
  overflow-x: hidden; position: relative;
  background:
    radial-gradient(circle at 80% 15%, #ffd6f0 0%, #f9e5ff 30%, #ffe7b1 65%, #fff4bc 80%) no-repeat,
    linear-gradient(135deg, #ffe7bd 0%, #e7e4ff 68%, #c4a0fd 100%);
}
.challenge-box textarea {
  width: 96%;
  min-height: 50px;
  font-size: 1.1em;
  border-radius: 10px;
  padding: 8px 10px;
  margin: 14px 0 10px 0;
  border: 2px solid #388e3c;
  background: #e3ffd6;
  font-family: inherit;
  resize: vertical;
}
.challenge-box .challenge-feedback {
  color: #388e3c;
  min-height: 28px;
  font-weight: bold;
  padding-top: 3px;
}
.button[disabled] {
  opacity: 0.6;
  cursor: not-allowed;
  pointer-events: none;
  transform: none !important;
}
  </style>
<script>
function isMobileDevice() {
  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
}
document.addEventListener('DOMContentLoaded', function() {
  if (isMobileDevice()) {
    document.body.style.fontFamily = "'Comic Neue', 'Comic Sans MS', cursive, sans-serif";
  } else {
    document.body.style.fontFamily = "'Comic Sans MS', 'Comic Neue', cursive, sans-serif";
  }
});
</script>
</head>
<body class="function-fortress-bg">
  <div class="fortress-bg-art">
    <div class="magic-circle magic-circle1"></div>
    <div class="magic-circle magic-circle2"></div>
    <div class="magic-circle magic-circle3"></div>
    <div class="magic-circle magic-circle4"></div>
    <div class="magic-circle magic-circle5"></div>
    <div class="magic-circle magic-circle6"></div>
    <div class="castle-wall"></div>
    <div class="tower tower1"><div class="tower-top"></div></div>
    <div class="tower tower2"><div class="tower-top"></div></div>
    <div class="tower tower3"><div class="tower-top"></div></div>
  </div>
  <div class="main-container">
    <h1>Level 5: Function Fortress! üè∞‚ú®</h1>
    <div class="info-box">
      <p>
        <b>Welcome to Function Fortress!</b><br>This is the final level you need to pass to finally take the final test! If you get everything right, you can earn yourself a badge and unleash your inner python! So do your best!</p>
        </div>
    <div class="info-box example-box">
      <p><b>Here‚Äôs how to make a magic function:</b></p>
      <pre>
def say_hello():
    print("Hello, Friend!")
      </pre>
      <p>
        <code>def</code> means "define" (make) your function.<br>
        <code>say_hello</code> is the name.<br>
        <code>()</code> is for stuff you can give to the function (we‚Äôll see that soon).<br>
        <code>print("Hello, Friend!")</code> is what the function does!
      </p>
    </div>
    <div class="info-box example-box">
      <b>Do you want to use your magic spell?</b> Call (run) your function by its name:
      <pre>
say_hello()
      </pre>
      If you type the name of the function and some parenthesis(), you can use your function!
    </div>
    <div class="info-box">
      <b>Try this:</b>
      <ul>
        <li>Call <code>say_hello()</code> three times in a row!</li>
        <li>Change the message inside <code>print()</code> to anything you want!</li>
      </ul>
    </div>
    <form class="challenge-box" id="challengeForm" autocomplete="off" onsubmit="return false;">
      üí° <b>Challenge:</b> Write a function that prints "Let's read a book!" and call (run) it two times below.
      <br><small>Your code must define a function and call it two times.</small>
      <textarea id="challengeInput" required spellcheck="false" placeholder='e.g.&#10;def read():&#10;  print("Let\'s read a book!")&#10;&#10;read()&#10;read()'></textarea>
      <div class="challenge-feedback" id="challengeFeedback"></div>
      <button id="nextBtn" class="button special" disabled>Next: More About Functions ‚û°Ô∏è</button>
    </form>
    <div class="fun-fact-box">
      <b>Did you know?</b> Grown-up coders use functions to run everything‚Äîgames, websites, and even robots!
    </div>
    <a href="index.html" class="button">Back to Home</a>
    <script>
      const challengeInput = document.getElementById('challengeInput');
      const challengeFeedback = document.getElementById('challengeFeedback');
      const nextBtn = document.getElementById('nextBtn');
      challengeInput.addEventListener('input', function() {
        const val = challengeInput.value.trim();
        if (!val) { challengeFeedback.textContent = ''; nextBtn.disabled = true; return; }
        if (!/^def\s+\w+\s*\(/.test(val)) {
          challengeFeedback.textContent = "Start by defining a function using def!";
          nextBtn.disabled = true; return;
        }
        if (!/print\s*\([\'\"]Let['‚Äô]?s read a book![\'\"]\)/i.test(val)) {
          challengeFeedback.textContent = "Be sure your function uses print(\"Let's read a book!\") exactly!";
          nextBtn.disabled = true; return;
        }
        if ((val.match(/\n[\w_]+\s*\(\)/g)||[]).length < 2) {
          challengeFeedback.textContent = "Call your function two times!";
          nextBtn.disabled = true; return;
        }
        challengeFeedback.textContent = "Awesome! Function magic achieved!";
        nextBtn.disabled = false;
      });
      nextBtn.onclick = function(){ window.location.href = 'lvl5pg2.html'; };
    </script>
  </div>
</body>
</html>


