<!DOCTYPE html>
<html lang="en">
<head>
  <title>Level 4: Loop Lagoon - Meet the Loop Counter!</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="style.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      min-height: 100vh;
      margin: 0; padding: 0;
      background: linear-gradient(135deg, #e2f9b7 0%, #faffd1 65%, #ffe082 100%);
      position: relative; overflow-x: hidden;
      font-family: 'Comic Sans MS', 'Comic Neue', cursive, sans-serif;
    }
    .loop-lagoon-circles {
      position: fixed; inset: 0; z-index: 0;
      pointer-events: none; overflow: hidden;
    }
    .loop-circle {
      position: absolute; border-radius: 50%;
      border: 6px solid #b0e15777;
      background: none;
      animation: loopTumble 7.5s infinite alternate ease-in-out, fadeFloat 9s infinite alternate;
      opacity: 0.48;
    }
    @keyframes loopTumble {
      0% { transform: scale(1) rotate(0deg);}
      100% { transform: scale(1.17) rotate(25deg);}
    }
    @keyframes fadeFloat {
      0%{ opacity: 0.17;}
      20%{ opacity: 0.53;}
      60%{ opacity: 0.38;}
      100%{ opacity: 0.48;}
    }
    .loop-circle1 { left: 2vw; top: 9vh; width: 210px; height: 210px; border-color: #ffe382cc; animation-delay: 0s, 1s;}
    .loop-circle2 { left: 77vw; top: 14vh; width: 154px; height: 154px; border-color: #fff6b999; animation-delay: 1.5s, 0s;}
    .loop-circle3 { left: 43vw; top: 67vh; width: 110px; height: 110px; border-color: #ffd18099; animation-delay: 0.5s, 2.3s;}
    .loop-circle4 { left: 67vw; top: 59vh; width: 79px; height: 79px; border-color: #95ec92bb; animation-delay: 2.1s, 4.2s;}
    .loop-circle5 { left: 37vw; top: 11vh; width: 95px; height: 95px; border-color: #d7eda7; animation-delay: 0.9s, 6.1s;}
    .loop-circle6 { left: 14vw; top: 51vh; width: 125px; height: 125px; border-color: #eef29a99; animation-delay: 1.7s, 2.9s;}
    .loop-circle7 { left: 58vw; top: 33vh; width: 59px; height: 59px; border-color: #fae3c8aa; animation-delay: 0.7s, 2.5s;}
    .loop-circle8 { left: 60vw; top: 74vh; width: 78px; height: 78px; border-color: #fed442b3; animation-delay: 1.1s, 4.8s;}
    .loop-circle9 { left: 24vw; top: 34vh; width: 63px; height: 63px; border-color: #b0e6c0cc; animation-delay: 0.4s, 1.8s;}
    .loop-circle10 { left: 82vw; top: 49vh; width: 88px; height: 88px; border-color: #ffb347a9; animation-delay: 1.6s, 3.6s;}
    .loop-circle11 { left: 5vw; top: 85vh; width: 38px; height: 38px; border-color: #fff4d2; animation-delay:2.5s,0.5s;}
    .loop-circle12 { left: 85vw; top: 82vh; width: 200px; height: 200px; border-color: #b0e15755; animation-delay:0.8s,6.2s;}
    .challenge-box textarea {
      width: 98%;
      min-height: 44px;
      font-size: 1.1em;
      border-radius: 9px;
      border: 2px solid #388e3c;
      margin-top: 10px;
      font-family: inherit;
      padding: 8px 12px;
    }
    .challenge-box .challenge-feedback {
      min-height: 1.9em;
      color: #388e3c;
      margin: 3px 0 6px 0;
      font-weight: bold;
    }
    .button.special[disabled] {
      opacity: 0.57;
      pointer-events: none;
    }
  </style>
  <script>
    function isMobileDevice() {
      return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    }
    document.addEventListener('DOMContentLoaded', function() {
      if (isMobileDevice()) {
        document.body.style.fontFamily = "'Comic Neue', 'Comic Sans MS', cursive, sans-serif";
      } else {
        document.body.style.fontFamily = "'Comic Sans MS', 'Comic Neue', cursive, sans-serif";
      }
    });
  </script>
</head>
<body>
  <div class="loop-lagoon-circles">
    <div class="loop-circle loop-circle1"></div>
    <div class="loop-circle loop-circle2"></div>
    <div class="loop-circle loop-circle3"></div>
    <div class="loop-circle loop-circle4"></div>
    <div class="loop-circle loop-circle5"></div>
    <div class="loop-circle loop-circle6"></div>
    <div class="loop-circle loop-circle7"></div>
    <div class="loop-circle loop-circle8"></div>
    <div class="loop-circle loop-circle9"></div>
    <div class="loop-circle loop-circle10"></div>
    <div class="loop-circle loop-circle11"></div>
    <div class="loop-circle loop-circle12"></div>
  </div>
  <div class="main-container">
    <h1>Meet the Loop Counter! üîÅ</h1>
    <div class="info-box">
      <p>Each time you loop, a special helper (like a scorekeeper) counts for you. This makes it easy to know which lap you're on!</p>
    </div>
    <pre>
for i in range(4):
print("Jump number", i)


# in this case, the letter i is the counter!</pre>
    <div class="example-box">
      <p>See how the value of the letter <code>i</code> changes each turn? You could say it's a variable that counts turns!<br>
         You'll see <b>Jump number 0</b>, <b>Jump number 1</b>, etc. <b>i</b> starts at 0 and grows by 1 each time the loop runs. Remember that!</p>
    </div>
    <div class="info-box">
      <ul>
        <li>You can do math with the counter! Try <code>print(i + 1)</code> inside the loop.</li>
        <li>Try other counter names: <code>lap</code>, <code>step</code>, or even <code>banana</code>!</li>
      </ul>
    </div>
    <div class="challenge-box">
      <p>üî¢ Now I want you to know Indentation is very important here! Indentation is using the <code>tab</code> key on your keyboard to control your spaces!</p>
    </div>
    <pre>
# if you do your loop like this: 


      for i in range(5):
print("hello", i)
print("done with loop")


# Then it might not work the way you want! But if you do it like this:


for i in range(5):
print("hello", i)
print("done with loop")


# it'll work much better, and it also looks nicer wouldn't you say?
    </pre>
    <form class="challenge-box" autocomplete="off" onsubmit="return false;">
      üåü <b>Mini-Quest:</b> Can you make a loop that prints your favorite food 5 times? (Use <code>print("üçï")</code> or any emoji!) It's okay to fail, we have more stuff for you!
      <textarea id="challengeInput" placeholder='for i in range(5):\n    print("üçé")' spellcheck="false"></textarea>
      <div class="challenge-feedback" id="challengeFeedback"></div>
      <button class="button special" id="nextBtn" disabled>Next: Loopy Lists ‚û°Ô∏è</button>
    </form>
    <div class="fun-fact-box">
      üí°Counters are what make loops super smart‚Äîthey remember exactly where you are!
    </div>
    <a href="lvl4pg3.html" class="button special">Next: Loopy Lists ‚û°Ô∏è</a>
    <a href="level4.html" class="button">‚¨ÖÔ∏è Back to Loops!</a>
    <a href="index.html" class="button">üè† Home</a>
  </div>
  <script>
    const challengeInput = document.getElementById("challengeInput");
    const challengeFeedback = document.getElementById("challengeFeedback");
    const nextBtn = document.getElementById("nextBtn");
    function isValidLoop(str) {
      str = str.trim();
      // for loop over range(5), must have print("emoji or food") indented
      if (!/^ *for +[a-zA-Z_][\w]* +in +range *\(\s*5\s*\)\s*:[\s\S]*?print\s*\(\s*["'`][^"'`]+["'`]\s*\)/m.test(str)) return false;
      const printMatch = str.match(/print\s*\(\s*["'`](.+?)["'`]\s*\)/);
      if (!printMatch) return false;
      const inside = printMatch[1].toLowerCase().trim();
      // foods or emoji (just make sure it's not empty and not the literal word 'food')
      if (!inside || inside === "food" || inside === "[food]") return false;
      return true;
    }
    challengeInput.addEventListener("input", function() {
      if (isValidLoop(challengeInput.value)) {
        challengeFeedback.textContent = "Yay! That's a valid printing loop!";
        nextBtn.disabled = false;
      } else {
        challengeFeedback.textContent = "Use a for loop over range(5), and print an emoji or food word.";
        nextBtn.disabled = true;
      }
    });
    nextBtn.onclick = function() {
      window.location.href = "lvl4pg3.html";
    };
  </script>
</body>
</html>
