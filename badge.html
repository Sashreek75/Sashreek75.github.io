<!DOCTYPE html>
<html lang="en">
<head>
  <title>Claim Your PyQuest Master Badge!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="style.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Comic Sans MS', 'Comic Neue', cursive, sans-serif;
      background: linear-gradient(135deg, #fffbe7 70%, #ffe082 100%);
      min-height: 100vh;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      position: relative;
      overflow-x: hidden;
    }
    .badge-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 40px;
      z-index: 1;
      position: relative;
    }
    .badge-title {
      font-size: 2.1em;
      font-weight: bold;
      color: #e65100;
      text-shadow: 1px 2px 8px #ffd54f;
      margin-bottom: 16px;
      margin-top: 0;
      letter-spacing: 1px;
      text-align: center;
    }
    .badge-desc {
      font-size: 1.2em;
      color: #7a5600;
      margin-bottom: 30px;
      text-align: center;
      max-width: 400px;
    }
    .claim-btn {
      display: inline-block;
      color: white;
      padding: 18px 36px;
      border-radius: 12px;
      text-decoration: none;
      font-size: 1.3em;
      margin: 20px;
      font-family: 'Comic Sans MS', 'Comic Neue', cursive, sans-serif;
      cursor: pointer;
      background: linear-gradient(90deg, #ff5e62 80%, #fbb03b 100%);
      box-shadow: 2px 4px 16px #0003;
      transition: background 0.3s, transform 0.2s;
      border: none;
      font-weight: bold;
      text-align: center;
    }
    .claim-btn:hover {
      background: linear-gradient(90deg, #fbb03b 80%, #ff5e62 100%);
      transform: scale(1.05) rotate(-2deg);
    }
    .badge-showcase-area {
      margin: 34px 0 0 0;
      width: 240px;
      height: 240px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      z-index: 1;
    }
    .badge-holder {
      width: 140px;
      height: 140px;
      background: radial-gradient(circle at 60% 40%, #fffce9 0%, #ffe082 70%, #e7b400 100%);
      border-radius: 50%;
      border: 8px solid gold;
      box-shadow: 0 0 30px #ffe082a0, 0 0 0 0 #fffbe700;
      z-index: 3;
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%,-50%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 4.8em;
      color: #e65100;
      text-shadow: 0 2px 12px #fffbe7, 0 0 16px #ffd700;
      overflow: visible;
      pointer-events: none;
    }
    .badge-overlay-anim {
      position: fixed;
      left: 0; top: 0; width: 100vw; height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      pointer-events: none;
      transition: opacity 0.4s;
      opacity: 0;
      background: none;
    }
    .badge-overlay-anim.active {
      opacity: 1;
      pointer-events: all;
      background:
        linear-gradient(120deg, #fffbe7BB 0%, #ffe199A0 50%, #ffd70092 100%);
      backdrop-filter: blur(2px);
      transition: opacity 0.3s cubic-bezier(.36,1.9,.52,0.98);
    }
    .mega-badge {
      width: 370px;
      height: 370px;
      background: radial-gradient(circle at 54% 38%, #fffbe7 0%, #ffd700 72%, #e7b400 100%);
      border-radius: 50%;
      border: 18px solid gold;
      box-shadow:
        0 0 130px #ffe082dd,
        0 0 40px 16px #ffd70066,
        0 0 0 0 #fffbe766;
      display: flex;
      align-items: center;
      justify-content: center;
      transform: scale(0.05) translateY(600px);
      opacity: 0;
      font-size: 8.2em;
      color: #e65100;
      position: absolute;
      left: 50%; top: 53vh;
      z-index: 10001;
      text-shadow: 0 8px 38px #ffe999a2, 0 0 24px #ffd700a6, 0 2px 13px #fffdccb0;
      overflow: visible;
      transition: none;
    }
    .mega-shine {
      position: absolute;
      left: 50%; top: 50%;
      width: 360px; height: 360px;
      pointer-events: none;
      border-radius: 50%;
      transform: translate(-50%,-50%) scale(1.12);
      z-index: 2;
      display: none;
      transition: opacity 0.2s;
      background:
        radial-gradient(circle at 72% 27%, #fffbe7cc 10%, #fffde799 57%, #ffd70000 100%);
    }
    .shine-lines {
      pointer-events: none;
      position: absolute;
      left: 50%; top: 50%;
      width: 380px; height: 380px;
      z-index: 4;
      display: none;
    }
    .shine-line {
      position: absolute;
      left: 50%; top: 50%;
      width: 6px; height: 110px;
      margin-left: -3px;
      margin-top: -115px;
      border-radius: 26px;
      background: linear-gradient(to bottom, #fffbe7 0%, #fffbe780 70%, #ffd70030 100%, transparent 100%);
      filter: blur(0.5px);
      opacity: 0.86;
      transform-origin: 50% 100%;
      animation: shineLineGlow 1.7s 1 cubic-bezier(.51,1.6,.63,.97);
    }
    @keyframes shineLineGlow {
      0% { opacity: 0; transform: scaleY(0.12) rotate(var(--angle,0deg)); }
      40% { opacity: 1; }
      100% { opacity: 0.14; transform: scaleY(1.05) rotate(var(--angle,0deg)); }
    }
    .confetti { 
      position: fixed; 
      left: 0; top: 0; 
      width: 100vw; height: 100vh; 
      pointer-events: none;
      z-index: 11000; 
    }
    .confetti-piece {
      position: absolute;
      width: 20px; height: 20px;
      opacity: 0;
      border-radius: 4px;
      z-index: 11001;
      font-size: 1.5em;
      pointer-events: none;
      filter: drop-shadow(0 2px 8px #ffd70066);
    }
    .big-star, .small-star {
      position: absolute;
      z-index: 11003;
      color: #ffd700;
      pointer-events: none;
    }
    .big-star {
      font-size: 4em;
      opacity: 0;
      left: 50%; top: 45vh;
      transform: translate(-50%, -50%);
      filter: drop-shadow(0 2px 16px #ffe082cc);
      transition: none;
    }
    .small-star {
      font-size: 2em;
      opacity: 0;
      filter: drop-shadow(0 1px 4px #ffd70077);
    }
  </style>
  <script>
    function isMobileDevice() {
      return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    }
    document.addEventListener('DOMContentLoaded', function() {
      if (isMobileDevice()) {
        document.body.style.fontFamily = "'Comic Neue', 'Comic Sans MS', cursive, sans-serif";
      } else {
        document.body.style.fontFamily = "'Comic Sans MS', 'Comic Neue', cursive, sans-serif";
      }
    });
  </script>
</head>
<body>
  <div class="badge-container">
    <div class="badge-title">PyQuest Master Badge</div>
    <div class="badge-desc">
      Congratulations! You got a perfect score on the PyQuest Final Test.<br>
      <b>Click below to claim your badge!</b>
    </div>
    <button class="claim-btn" id="claimBadgeBtn">üèÖ Claim Your Badge</button>
    <div class="badge-showcase-area">
      <div class="badge-holder" id="badgeShowcase">
        <span id="showcaseEmoji">üèÖ</span>
      </div>
      <span class="small-star" id="star1" style="top:61%; left:59%;">‚≠ê</span>
      <span class="small-star" id="star2" style="top:72%; left:52%;">‚≠ê</span>
    </div>
    <a href="next.html" class="button special">Where can I go next?</a>
    <a href="index.html" class="button">üè† Back to Home</a>
  </div>
  <div class="badge-overlay-anim" id="badgeAnimOverlay" style="display:none;">
    <div class="mega-badge" id="megaBadge">
      üèÖ
      <div class="mega-shine" id="megaShine"></div>
      <div class="shine-lines" id="shineLines"></div>
    </div>
    <div class="confetti" id="confetti"></div>
    <span class="big-star" id="bigStar">‚≠ê</span>
  </div>
  <script>
    const claimBtn = document.getElementById('claimBadgeBtn');
    const badgeAnimOverlay = document.getElementById('badgeAnimOverlay');
    const megaBadge = document.getElementById('megaBadge');
    const megaShine = document.getElementById('megaShine');
    const confettiDiv = document.getElementById('confetti');
    const bigStar = document.getElementById('bigStar');
    const badgeShowcase = document.getElementById('badgeShowcase');
    const star1 = document.getElementById('star1');
    const star2 = document.getElementById('star2');
    const shineLines = document.getElementById('shineLines');
    function finalizeBadge() {
      badgeAnimOverlay.style.opacity = 0;
      setTimeout(() => {
        badgeAnimOverlay.style.display = 'none';
        star1.style.opacity = 1;
        star2.style.opacity = 1;
      }, 320);
    }
    function startBadgeAnim() {
      badgeAnimOverlay.style.display = 'flex';
      setTimeout(() => badgeAnimOverlay.classList.add('active'), 10);
      megaBadge.style.transition = 'none';
      megaBadge.style.opacity = 0;
      megaBadge.style.transform = 'scale(3.6) translate(-50%,-50%)';
      megaBadge.style.left = '50%';
      megaBadge.style.top = '52vh';
      megaShine.style.display = "none";
      bigStar.style.opacity = 0;
      star1.style.opacity = 0;
      star2.style.opacity = 0;
      confettiDiv.innerHTML = '';
      shineLines.innerHTML = '';
      shineLines.style.display = "none";
      setTimeout(() => {
        megaBadge.style.opacity = 1;
        megaBadge.style.transition = 'transform 0.85s cubic-bezier(.39,1.87,.41,0.96), opacity 0.5s';
        megaBadge.style.transform = "scale(1.13) translate(-50%,-54%)";
        setTimeout(() => {
          megaShine.style.display = "block";
          megaShine.style.opacity = "1";
        }, 235);
        setTimeout(() => {
          shineLines.innerHTML = '';
          shineLines.style.display = "block";
          for (let i = 0; i < 18; i++) {
            const line = document.createElement('div');
            line.className = 'shine-line';
            line.style.setProperty('--angle', `${i * 20}deg`);
            line.style.transform = `scaleY(0.12) rotate(${i*20}deg)`;
            shineLines.appendChild(line);
          }
        }, 440);
        setTimeout(() => launchConfetti(40), 570);
        setTimeout(() => {
          shineLines.style.display = "none";
          megaBadge.style.transition = 'transform 1.22s cubic-bezier(0.7,1.7,0.45,1.01), opacity 0.82s';
          megaShine.style.opacity = "0.25";
          const showcase = badgeShowcase.getBoundingClientRect();
          const mega = megaBadge.getBoundingClientRect();
          const dx = showcase.left + showcase.width/2 - (window.innerWidth/2);
          const dy = showcase.top + showcase.height/2 - (window.innerHeight/2);
          megaBadge.style.transform = `scale(0.60) translate(${dx}px, ${dy}px)`;
          megaBadge.style.opacity = 1;
          bigStar.style.left = "50%";
          bigStar.style.top = "53%";
          bigStar.style.opacity = 0.90;
          bigStar.style.transition = "all 1.25s cubic-bezier(.51,1.9,.71,.95), opacity 1.1s";
          setTimeout(() => {
            bigStar.style.left = (showcase.left + showcase.width * 0.59) + "px";
            bigStar.style.top = (showcase.top + showcase.height * 0.61) + "px";
          }, 30);
          setTimeout(() => {
            bigStar.style.opacity = 0;
            megaBadge.style.opacity = 0;
          }, 1215);
          setTimeout(finalizeBadge, 1610);
        }, 1340);
      }, 135);
    }
    function launchConfetti(count) {
      const emojis = ['‚≠ê','‚ú®','üéâ','üíõ','üü°','üü†','üîÜ'];
      confettiDiv.innerHTML = "";
      for(let i=0; i<count; i++) {
        const conf = document.createElement('div');
        conf.className = 'confetti-piece';
        conf.innerText = emojis[Math.floor(Math.random()*emojis.length)];
        const angle = Math.random() * Math.PI * 2;
        const r = 84 + Math.random()*48;
        conf.style.left = (window.innerWidth/2 + Math.cos(angle)*24) + "px";
        conf.style.top = (window.innerHeight/2 + Math.sin(angle)*38) + "px";
        conf.style.opacity = 1;
        conf.style.fontSize = 1.4 + Math.random()*1 + 'em';
        conf.style.color = "#ffd700";
        confettiDiv.appendChild(conf);
        const dx = Math.cos(angle) * (r + Math.random()*90) + (Math.random()-0.5)*56;
        const dy = Math.sin(angle) * (r + Math.random()*75) + 105 + Math.random()*90;
        setTimeout(() => {
          conf.animate([
            { transform: "scale(1)", opacity: 1 },
            { 
              left: (window.innerWidth/2 + dx) + "px",
              top: (window.innerHeight/2 + dy) + "px",
              opacity: 0, 
              transform: "scale(0.65) rotate("+ (Math.random()*520-260)+"deg)" 
            }
          ], {
            duration: 1220 + Math.random()*800,
            fill: "forwards",
            easing: "cubic-bezier(.22,1.6,.62,.88)"
          });
        }, 40 + Math.random()*260);
      }
      setTimeout(() => { confettiDiv.innerHTML = ""; }, 2300);
    }
    claimBtn.onclick = function() {
      if (badgeAnimOverlay.classList.contains('active')) return;
      startBadgeAnim();
    };
    star1.style.opacity = 0;
    star2.style.opacity = 0;
  </script>
</body>
</html>

