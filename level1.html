<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Level 1: Print Power! üñ®Ô∏è | PyQuest Adaptive</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700&family=Fira+Mono:wght@500&display=swap" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, orange 70%, gold 100%);
      color: #fff;
      font-family: 'Comic Neue', 'Comic Sans MS', cursive, sans-serif;
      min-height: 100vh;
      margin: 0;
      text-align: center;
      transition: background 0.6s, font-family 0.3s;
    }
    body.mature {
      background: linear-gradient(120deg, #23272f 55%, #456fe6 104%);
      color: #f7f7fa;
      font-family: 'Inter', system-ui, Arial, sans-serif;
      letter-spacing: 0;
    }
    /* Decorative BG */
    .print-bg-scene { position: fixed; z-index: -1; inset: 0; width: 100vw; height: 100vh; overflow: hidden; pointer-events: none;}
    .print-bg-scene { background: linear-gradient(115deg, #ffe6bb 0%, #ffb5e6 70%, #ffd183 100%);}
    .desk-bg { position: absolute; bottom: 0; left: 0; width: 100vw; height: 22vh; background: linear-gradient(to top,#ffd183 40%,#fbeaca 100%); border-top-left-radius:60px; border-top-right-radius:60px; box-shadow: 0 -8px 62px 24px #ffca557a; z-index: 1;}
    body.mature .print-bg-scene { background: linear-gradient(120deg, #23272f 5%, #343857 75%, #314777 100%);}
    body.mature .desk-bg { background: linear-gradient(to top,#262b3a 30%,#373747 98%); box-shadow: 0 -6px 32px 24px #0c223d26; border-radius: 28px 28px 0 0;}
    .printer { position: absolute; right: 8vw; bottom: 15vh; width: 115px; height: 80px; background: linear-gradient(120deg,#e1e4ed 65%,#bcc2c6 98%); border-radius: 24px 28px 16px 16px / 20px 25px 24px 30px; box-shadow: 0 5px 14px #d1b98988; z-index: 2; }
    .printer::before { content:""; position:absolute; top:-24px; left:38px; width:38px; height:34px; background:#fff; border-radius:5px 5px 12px 12px; box-shadow:0 10px 12px #f9e9a3cc; z-index:3; animation: paper-slide 2.8s cubic-bezier(.51,0,.68,1.29) infinite alternate; }
    @keyframes paper-slide { 0% { top:-28px; opacity:.3; } 40% { top:-18px; opacity:1; } 70% { top:-8px; opacity:1; } 100% { top:-16px; opacity:.5; } }
    .printer::after { content:""; position:absolute; bottom:15px; left:47px; width:16px; height:10px; border-radius:10px; background:#7ed957; box-shadow:0 1px 2px #558e34c1; }
    .cloud, .cloud2, .sparkle, .sparkle2, .sparkle3, .flying-paper, .flying-paper2, .flying-paper3 { pointer-events: none;}
    .cloud { position: absolute; background: #fff; border-radius:50%; opacity:.82; box-shadow: 60px 22px 0 0 #fff, 120px 31px 0 0 #fff, 170px 21px 0 0 #fff, 235px 55px 0 0 #fff, 268px 38px 0 0 #fff; width:120px; height:61px; top:10vh; left:12vw; filter:blur(0.4px); z-index:3;}
    .cloud2 { width:140px; height:74px; top:18vh; left:62vw; }
    .sparkle{ position:absolute; border-radius:50%; background:radial-gradient(circle,#fff9 55%,#fff0 100%); width:22px; height:22px; top:33vh; left:44vw; filter:blur(2.5px); opacity:.6; animation:sparkle1 4.1s infinite alternate; z-index:3; }
    .sparkle2{ width:12px; height:12px; left:25vw; top:60vh; animation:sparkle1 3s 1.2s infinite alternate; }
    .sparkle3{ width:16px; height:16px; left:77vw; top:21vh; animation:sparkle1 2.4s 0.4s infinite alternate; opacity:.35; filter:blur(1px);}
    body.mature .cloud, body.mature .cloud2 {background:#3f445c; opacity:.34;}
    .flying-paper { position: absolute; top: 10vh; left: 10vw; width: 48px; height: 30px; background: #fff; border-radius: 4px 8px 10px 10px; box-shadow: 0 2px 8px #ffc1d8aa; opacity: .82; animation: paper-fly1 7s linear infinite; transform:rotate(3deg); z-index:4;}
    .flying-paper2 { top: 19vh; left: 26vw; width: 42px; height: 24px; opacity: 0.7; animation: paper-fly2 8s linear infinite; background: #fffffa; filter: blur(.3px); transform: rotate(-10deg);}
    .flying-paper3 { top: 11vh; left: 70vw; animation: paper-fly3 12s linear infinite 2.9s; width: 36px; height: 18px; opacity: .54; background: #fffde1; filter: blur(1px); transform: rotate(18deg);}
    @keyframes paper-fly1 { 0%{top:10vh;left:11vw;transform:rotate(3deg);} 35%{top:18vh;left:40vw;transform:rotate(-24deg);} 65%{top:44vh;left:34vw;transform:rotate(-11deg);} 100%{top:56vh;left:71vw;transform:rotate(38deg); } }
    @keyframes paper-fly2 { 0%{top:19vh;left:26vw;} 70%{top:64vh;left:81vw;} 100%{top:71vh;left:92vw;} }
    @keyframes paper-fly3 { 0%{top:11vh;left:70vw;} 66%{top:51vh;left:20vw;} 100%{top:61vh;left:3vw;} }
    /* Main layout */
    .main-container {
      max-width: 730px;
      background: rgba(255,255,255,.15);
      border-radius:30px;
      box-shadow:0 8px 32px 0 rgba(31,38,135,0.18);
      margin:44px auto 64px auto;
      padding:44px 18px 32px 18px;
      position:relative;
      z-index:10;
      color:white;
      text-align:left;
      font-size: 1.16em;
      line-height: 1.62em;
      border: 1.7px solid #fecb54;
      transition: background 0.7s, color .6s, border .6s;
    }
    body.mature .main-container {
      color: #eaecf3;
      background: rgba(42, 54, 73, 0.93);
      border: 1.7px solid #4c5cb0;
      box-shadow: 0 6px 46px 0 #111b3458;
      font-size: 1.08em;
    }
    h1 {
      background: linear-gradient(90deg,DodgerBlue,#ff5e62);
      padding:13px 38px;
      border-radius:19px;
      font-size:2.35em;
      margin-bottom:17px;
      color:white;
      text-shadow:2px 2px 7px #3337;
      letter-spacing:1.5px;
      font-family:'Comic Neue', cursive;
      text-align:center;
      font-weight: 700;
      transition: background .6s, color .5s, font-family .3s;
    }
    body.mature h1 {
      background: linear-gradient(90deg,#456fe6 30%,#13ebc1 100%);
      font-family: 'Inter',Arial,sans-serif;
      font-size:2.10em;
      color: #e6e9fe;
      letter-spacing: .5px;
      text-shadow: 1px 3.5px 15px #1f224440;
      font-weight: 700;
    }
    /* Progress, badges */
    .progress-row { width: 100%; margin: 19px 0 20px; text-align: center; }
    .progress-bar-bg { background-color: #ffd082; height: 18px; border-radius: 16px; box-shadow: 0 3px 9px #ffd082bb inset; width: 80%; max-width: 600px; margin: 0 auto; overflow: hidden; position: relative;}
    .progress-bar-fg { background: linear-gradient(90deg, #3b82f6 35%, #67e8f9 95%); height: 18px; width: 0%; border-radius: 16px 0 0 16px; transition: width 0.6s ease-in-out; box-shadow: 0 2px 6px #2563eb;}
    body.mature .progress-bar-bg { background: #38467d;box-shadow: 0 2px 12px #1419226e inset;}
    body.mature .progress-bar-fg { background: linear-gradient(90deg,#13ebc1 30%,#4c5cb0 100%);}
    .badge-container { margin-top: 10px; text-align: center;}
    .badge {
      display: inline-block;
      padding: 7px 18px;
      font-weight: 700;
      border-radius: 13px;
      background: linear-gradient(90deg, #ffe082, #ffb300);
      color: #674900;
      box-shadow: 0 3px 10px #b07f00aa;
      margin: 0 7px 3px 7px;
      user-select: none;
      cursor: default;
      font-size: 1em;
      letter-spacing:.3px;
      transition: background .6s, color .4s;
    }
    body.mature .badge {
      background: linear-gradient(90deg, #38467d 55%, #13ebc1 100%);
      color: #f9fafc;
      box-shadow: 0 3px 13px #0b1c347a;
      border: 1.3px solid #4c5cb0;
    }
    /* Mascot, speech */
    .mascot-bubble { display: flex; align-items: flex-start; margin: 14px 0 28px 0; gap: 14px;}
    .mascot-face {
      font-size: 3.4em;
      user-select: none;
      line-height: 1;
      filter: drop-shadow(0 1px 6px #7828371a);
      margin-right: 5px;
      min-width: 1.2em;
      transition: font-size .3s;
    }
    body.mature .mascot-face {
      font-size: 2.03em;
      filter: none;
      margin-right: 15px;
      margin-top: 0.29em;
    }
    .bubble-speech {
      position: relative; background: #fffbe8; color: #8d5500; font-size: 1.17em;
      border-radius: 27px; padding: 17px 27px; max-width: 89%; box-shadow: 2px 5px 21px #ffecb350;
      line-height: 1.38; font-family: 'Comic Neue', cursive; font-weight: 600;
    }
    .bubble-speech::after {
      content: ""; position: absolute; bottom: -20px; left: 38px;
      border-width: 20px 18px 0 18px; border-style: solid; border-color: #fffbe8 transparent transparent transparent;
      filter: drop-shadow(0 1px 1px #d2b8557c);
    }
    body.mature .bubble-speech {
      background: #232a33; color: #befcd4;
      box-shadow: 0 5px 32px #0a1b2460;
      font-family: 'Inter',Arial,sans-serif; font-size: 1.10em; font-weight: 500;letter-spacing:.1px;
    }
    body.mature .bubble-speech::after {border-top-color: #232a33;}
    .info-box.speech-bubble { background: #fffbe8; border: 2px solid #ffb300; color: #7e5704; box-shadow: 0 2px 12px #ffecb3aa;}
    .info-box.speech-bubble::after { border-width: 24px 24px 0 0; border-top-color: #fffbe8;}
    body.mature .info-box.speech-bubble { background: #353d4e;color:#e5debe; border: 1.5px solid #4c5cb0;}
    body.mature .info-box.speech-bubble::after { border-top-color:#353d4e;}
    .video-tile { width: 98%; max-width: 490px; margin: 32px auto 26px auto; border-radius: 20px; box-shadow: 0 3px 42px #121b3936; overflow: hidden; display: block; text-align: center; background: #fff;}
    .video-tile video, .video-tile iframe { width: 100%; height: 238px; display: block; background: #111;}
    body.mature .video-tile {background:#171b28; box-shadow: 0 5px 32px #272f4796;}
    /* Output boxes */
    #output1, #output2, #output3 {
      background: #131c18;
      color: #95ffa4;
      border-radius: 20px;
      padding: 18px 24px;
      margin: 14px 0 22px 0;
      white-space: pre-wrap;
      font-family: 'Comic Neue', 'Comic Sans MS', cursive, monospace;
      font-size: 1.14em;
      min-height: 36px;
      box-shadow: 0 0 0 2px #3b82f68c, 0 8px 44px 8px #204c28a2 inset;
      transition:background .49s;
      border: 0.5px solid #62efa8;
      display: flex;
      align-items: center;
    }
    body.mature #output1, body.mature #output2, body.mature #output3 {
      background: #1a1e36;
      color: #92c7b2;
      font-size: 1.09em;
      border: 0.5px solid #3c6acc;
      font-family: 'Fira Mono', monospace;
    }
    /* Answer/Challenge box improvement */
    .challenge-box.speech-bubble {
      background: linear-gradient(90deg, #c8e6c9 70%, #a5d6a7 100%);
      border: 2px solid #388e3c;
      color: #005e36;
      font-weight: bold;
      border-radius: 20px;
      padding: 18px 20px 15px 20px;
      margin: 24px 0 18px 0;
      font-size: 1.13em;
      box-shadow: 0 5px 32px #ced3af8b;
      position:relative;
    }
    .challenge-box.success, .challenge-box .challenge-feedback.success {
      border:2px solid #47bd45 !important;
      background:linear-gradient(90deg,#ccffda 55%,#c4b9fd 100%);
      color:#357c2e !important;
      box-shadow: 0 0 24px #b6ffc6aa !important;
    }
    body.mature .challenge-box.speech-bubble {
      background:#212d3a !important;
      color: #9ee2cb !important;
      border: 1.3px solid #4c5cb0 !important;
      font-family: 'Fira Mono', monospace !important;
      font-size:1.03em;
      box-shadow: 0 8px 32px #36499c26;
    }
    body.mature .challenge-box.success,body.mature .challenge-box .challenge-feedback.success{
      background:#282e55;
      color:#c8fddf!important;
      border:1.7px solid #4ce145 !important;
      box-shadow: 0 0 8px #75f0c7b0 !important;
    }
    .challenge-box .challenge-feedback {
      margin: 9px 0 0 0;
      padding: 6px 13px;
      border-radius: 12px;
      background: #fff;
      font-size: 1em;
      color: #005e36;
      display: inline-block;
      min-width:120px;
      font-weight: 600;
    }
    .challenge-box .challenge-feedback.error {
      background: #ffe0e0;
      color: #bf2121;
      border:1px solid #ea7b7b;
    }
    .challenge-box .challenge-feedback.success {
      background: #c5ffd4;
      color: #1e6e23;
      border:1px solid #2fe152;
    }
    body.mature .challenge-box .challenge-feedback{
      background: #131d23;
      color:#60eecb;
      border:1px solid #152d34;
    }
    body.mature .challenge-box .challenge-feedback.error{
      background: #ffe0e0;
      color: #be4b4b;
      border:1px solid #ea7b7b;
    }
    body.mature .challenge-box .challenge-feedback.success{
      background: #182f1f;
      color:#56eea1;
      border:1px solid #45e15e;
    }
    #challengeInput {
      width: 97%;
      font-size: 1.16em;
      border-radius: 10px;
      padding: 11px 15px;
      margin-top: 10px;
      min-height: 44px;
      box-sizing: border-box;
      resize: vertical;
      color: #133f17;
      border: 2px solid #388e3c;
      background: #fafcff;
      font-family: monospace, 'Comic Neue', 'Comic Sans MS', cursive;
      outline:none;
      font-weight:600;
      margin-bottom:6px;
      transition:border .3s, background .3s;
      box-shadow:0 3px 24px #a5d6a7b3 inset;
    }
    body.mature #challengeInput {
      font-family:'Fira Mono',monospace;
      background:#131722;
      color:#e5f7ff;
      border: 1.2px solid #4c5cb0;
      box-shadow:0 2px 12px #4c5cb020 inset;
    }
    .editable-example {
      width: 95%;font-family: inherit;font-size: 1.11em; border-radius: 12px;padding: 12px 12px;margin: 21px 0 25px 0;box-sizing: border-box;border: 2px solid #fbb03b;resize: vertical;background: #fff;display: block;text-align: center;height: 44px;line-height: 1.32;overflow-y: auto;color: #000; font-family: 'Comic Neue', 'Comic Sans MS', cursive, monospace;
      transition: font-family .5s, background .6s, border .5s;
    }
    body.mature .editable-example {
      border: 1.2px solid #4c5cb0;background:#131722;color: #e5f7ff; font-size: 1.07em;font-family:'Fira Mono',monospace;
    }
    .example-btn { background: linear-gradient(90deg, #2563eb 70%, #60a5fa 100%); color: white; border: none; border-radius: 12px; padding: 9px 22px; font-weight: 700; font-family: 'Comic Sans MS', cursive, sans-serif; font-size: 1.09em; cursor: pointer; box-shadow: 0 5px 12px rgba(37, 99, 235, 0.47); margin-bottom: 0; margin-left: 7px;}
    .example-btn:hover {background: linear-gradient(90deg, #1e40af 70%, #3b82f6 100%); transform: scale(1.06);}
    body.mature .example-btn {background: linear-gradient(90deg,#13ebc1 26%,#4c5cb0 94%); color:#eee; font-family: 'Inter',Arial,sans-serif;}
    .example-btn:active {transform: scale(0.95);}
    /* Popup Gimmick */
    #scorePopup {
      position: fixed;
      top: 22px;
      right: 25px;
      z-index: 1200;
      background: linear-gradient(90deg, #3b82f6 60%, #60a5fa 100%);
      color: white;
      padding: 13px 24px;
      border-radius: 22px;
      font-family: 'Comic Neue', 'Inter', Arial, sans-serif;
      font-size: 1.18em;
      font-weight: bold;
      box-shadow: 0 5px 24px #224b8e37;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.41s, transform .31s;
      transform: translateY(-33px) scale(0.7);
    }
    #scorePopup.active {
      opacity: 1;
      transform: translateY(0) scale(1.03);
      animation: popup-bounce 1.1s cubic-bezier(.38,.47,.36,1.13);
    }
    @keyframes popup-bounce {
      0% { transform: translateY(-33px) scale(0.7);}
      28% { transform: translateY(10px) scale(1.05);}
      62% { transform: translateY(-5px) scale(0.98);}
      100% { transform: translateY(0) scale(1.03);}
    }
    body.mature #scorePopup {
      background: linear-gradient(90deg,#13ebc1 40%,#4c5cb0 100%);
      color:#e5f7ff;
      font-family: 'Inter', Arial, system-ui, sans-serif;
      box-shadow: 0 8px 42px #282d6f0e;
    }
    .button-row { display: flex; justify-content: center; gap: 18px; margin-top: 28px;}
    .button, .rainbow-btn { display: inline-block; color: white; padding: 18px 36px; border-radius: 11px; text-decoration: none; font-size: 1.15em; margin: 10px; font-family: 'Comic Sans MS', cursive, sans-serif; cursor: pointer; background: linear-gradient(90deg, #088F8F 80%, #357a6b 100%); box-shadow: 2px 4px 16px #0003; border: none; font-weight: 700; text-align: center; }
    .button.special, .rainbow-btn { background: linear-gradient(90deg, #ff5e62 80%, #fbb03b 100%);}
    .button:hover {background: linear-gradient(90deg, #357a6b 80%, #088F8F 100%);}
    body.mature .button, body.mature .rainbow-btn { background: linear-gradient(90deg,#4c5cb0,#13ebc1 90%); font-family:'Inter',Arial,sans-serif; color:#f4f6fd;}
    body.mature .button.special, body.mature .rainbow-btn { background: linear-gradient(90deg,#13ebc1,#3a49e3 100%);}
    #scoreDisplay { font-weight: 900; font-size: 1.43em; margin-bottom: 20px; color: #fff; background-color: #3b82f6; border-radius: 9px; padding: 11px 26px; box-shadow: 2px 4px 16px #0004; text-align: center; width: fit-content; min-width: 146px; margin-left: auto; margin-right: auto; font-family: 'Arial Black', Gadget, sans-serif; user-select: none;}
    body.mature #scoreDisplay {background: #232a33; color: #b6f7f4; border: 1.3px solid #4c5cb0;}
    @media only screen and (max-width: 695px) {
      .main-container{padding:11px 1vw;margin-top:11px;}
      h1{font-size:1.3em;padding:7px 3vw;}
      .bubble-speech,.info-box.speech-bubble,.mini-game-container{font-size:.93em;}
      .video-tile video, .video-tile iframe { height: 130px; }
      #scorePopup{ font-size:1em; padding:8px 12px; top:7px; right:7px;}
    }
    textarea, input, select, button {
      transition: all .23s;
    }
    textarea:focus, input:focus, select:focus, button:focus {
      outline: 3px solid #388e3c88;
    }
    body.mature textarea:focus, body.mature input:focus, body.mature select:focus, body.mature button:focus {
      outline: 2px solid #13ebc1 !important;
      background: #1d263b !important;
      color: #d3fff9 !important;
    }
  </style>
</head>
<body>
<div id="scorePopup">+10 Score!</div>
<div class="print-bg-scene">
  <div class="cloud"></div>
  <div class="cloud cloud2"></div>
  <div class="sparkle"></div>
  <div class="sparkle sparkle2"></div>
  <div class="sparkle sparkle3"></div>
  <div class="desk-bg"></div>
  <div class="printer"></div>
  <div class="flying-paper"></div>
  <div class="flying-paper flying-paper2"></div>
  <div class="flying-paper flying-paper3"></div>
</div>
<main class="main-container" aria-label="Main Level One Content">
  <h1 id="levelTitle">Level 1: Print Power! üñ®Ô∏è</h1>
  <div class="progress-row" aria-label="Level Progress">
    <div class="progress-bar-bg">
      <div class="progress-bar-fg" id="progBarFG" style="width:0%;"></div>
    </div>
    <div class="badge-container">
      <span class="badge" id="badge-print">üñ®Ô∏è Print Pro Beginner</span>
      <span class="badge" id="badge-quest" style="opacity:0.5;">üåà Mini-Quest</span>
    </div>
  </div>
  <div id="scoreDisplay" aria-live="polite" title="Your total adventure score">üèÜ Score: 0</div>
  <div class="mascot-bubble" aria-live="polite">
    <div class="mascot-face" id="mascotFace" aria-hidden="true">ü¶ä</div>
    <div class="bubble-speech" id="mascotGreeting"></div>
  </div>
  <div class="info-box speech-bubble" id="levelIntro"></div>
  <div id="customContent"></div>
  <div class="editable-input-wrap">
    <textarea class="editable-example" aria-label="Python code example" rows="1" style="font-size:1.19em;">print("Hello, world!")</textarea>
    <button class="example-btn" onclick="runExample(1)" aria-label="Try Example 1">Try it!</button>
  </div>
  <div id="output1" class="example-box" aria-live="polite"></div>
  <div class="example-box speech-bubble" id="customPrintExplain"></div>
  <div class="editable-input-wrap">
    <textarea class="editable-example" aria-label="Python code about animals" rows="1" style="font-size:1.2em;">print("My favorite animal is a cat!")</textarea>
    <button class="example-btn" onclick="runExample(2)" aria-label="Try Example 2">Try it!</button>
  </div>
  <div id="output2" class="example-box" aria-live="polite"></div>
  <div class="example-box green speech-bubble" id="customPrintMore"></div>
  <div class="editable-input-wrap">
    <textarea class="editable-example" aria-label="Python code about emoji" rows="1" style="font-size:1.19em;">print("üêç PyQuest is fun!")</textarea>
    <button class="example-btn" onclick="runExample(3)" aria-label="Try Example 3">Try it!</button>
  </div>
  <div id="output3" class="example-box" aria-live="polite"></div>
  <form class="challenge-box speech-bubble" id="challengeForm" autocomplete="off" onsubmit="return false;">
    <span id="miniQuestLabel">üåü Mini-Quest:</span>
    <p id="miniQuestPrompt">
      Use <code>print()</code> to show your name!<br>
      <small>(Start with <code>print(</code> and make sure your name is <b>inside quotes</b>!)</small>
    </p>
    <textarea id="challengeInput" required spellcheck="false" placeholder='e.g. print("Sashreek")' aria-label="Type your print code here"></textarea>
    <div class="challenge-feedback" id="challengeFeedback"></div>
    <button id="nextBtn" class="button special" disabled>Next: More About Printing ‚û°Ô∏è</button>
  </form>
  <div class="fun-fact-box speech-bubble" role="region" aria-label="Fun Fact" id="customFunFact"></div>
  <div class="button-row">
  <a href="index.html" class="button">Back to Home</a>
  <a href="try-python.html" class="button special" aria-label="Open Python Playground">Try it Yourself!</a>
  <a href="lvl1pg2.html" class="button special" aria-label="Continue with print">Continue with Print ‚û°Ô∏è</a>
</div>

  
</main>
<script>
  function userPrefs() {
    let style = (localStorage.getItem('pyq_learningStyle')||"").toLowerCase();
    let mascot = (localStorage.getItem('pyq_character')||"ü§ñ Robo-Coach").trim();
    let name = (localStorage.getItem('pyq_name')||"Adventurer").trim();
    let age = parseInt(localStorage.getItem('pyq_age')||'11',10);
    let isMature = age >= 12;
    return { style, mascot, name, age, isMature };
  }
  (()=>{ let u=userPrefs(); if(u.isMature) document.body.classList.add('mature'); })();
  let score = parseInt(localStorage.getItem('pyQuestScore')) || 0;
  document.getElementById('scoreDisplay').textContent = `üèÜ Score: ${score}`;
  function showScorePopup(points) {
    let pop = document.getElementById('scorePopup');
    if (!pop) return;
    pop.textContent = `+${points} Score!`;
    pop.classList.add('active');
    setTimeout(()=>{ pop.classList.remove('active'); }, 1700);
  }
  function updateScore(points) {
    score += points;
    showScorePopup(points);
    localStorage.setItem('pyQuestScore', score);
    document.getElementById('scoreDisplay').textContent = `üèÜ Score: ${score}`;
    if (score >= 10) {
      document.getElementById('badge-print').style.animation = 'badgepop 1.2s';
    }
    if (score >= 30) {
      document.getElementById('badge-quest').style.opacity = 1;
    }
  }
  function updateProgress(percent) {
    const progBar = document.getElementById('progBarFG');
    if (!progBar) return;
    progBar.style.width = percent + '%';
  }
  function runExample(idx) {
    const textarea = document.querySelectorAll('.editable-example')[idx - 1];
    const outbox = document.getElementById('output' + idx);
    const code = textarea.value.trim();
    const m = code.match(/^print\s*\(\s*(['"])([\s\S]*?)\1\s*\)$/);
    if (!m) {
      outbox.textContent = "Oops! Only simple print statements allowed here.";
      outbox.style.color = "#ff4267";
      return;
    }
    outbox.textContent = m[2];
    outbox.style.color = "#95ffa4";
    outbox.innerHTML += " <span style='font-size:1.2em;'>‚ú®</span>";
  }
  const challengeInput = document.getElementById('challengeInput');
  const challengeFeedback = document.getElementById('challengeFeedback');
  const nextBtn = document.getElementById('nextBtn');
  function validPrintName(line) {
    const regex = /^\s*print\s*\(\s*(['"])[^'"]+\1\s*\)\s*$/i;
    return regex.test(line.trim());
  }
  challengeInput.addEventListener('input', () => {
    const val = challengeInput.value.trim();
    if (!val) {
      challengeFeedback.textContent = '';
      challengeFeedback.className = 'challenge-feedback';
      nextBtn.disabled = true;
      return;
    }
    if (!val.match(/^print\s*\(/i)) {
      challengeFeedback.textContent = "Start with print( ...";
      challengeFeedback.className = 'challenge-feedback error';
      nextBtn.disabled = true;
      return;
    }
    if (!validPrintName(val)) {
      challengeFeedback.textContent = "Your name goes inside quotes! Like print(\"Maria\")";
      challengeFeedback.className = 'challenge-feedback error';
      nextBtn.disabled = true;
      return;
    }
    challengeFeedback.textContent = "Awesome! Ready for your adventure? üéâ";
    challengeFeedback.className = 'challenge-feedback success';
    document.getElementById('challengeForm').classList.add('success');
    nextBtn.disabled = false;
  });
  nextBtn.onclick = async () => {
    if (!nextBtn.disabled) {
      updateScore(10);
      updateProgress(33);
      confettiEffect(2300);
      nextBtn.disabled = true;
      challengeInput.disabled = true;
      document.getElementById('badge-quest').style.opacity = 1;
    }
  };
  const mascotData = {
    "üêç Py the Python": {
      emoji: "üêç",
      greeting: (isMature, n) =>
        isMature ?
        `<b>Welcome, ${n}.</b><br>I am Py the Python. In this first PyQuest level, I'll guide you as we build a simple restaurant menu using Python's <code>print()</code> function. No prior experience required‚Äîlet's get coding together!` :
        `<b>Hi ${n}!</b><br>I'm Py, your friendly Python! Ready to code your first restaurant menu with me? Let's see what print can do!`
    },
    "ü§ñ Robo-Coach": {
      emoji: "ü§ñ",
      greeting: (isMature, n) =>
        isMature ?
        `<b>Hello, ${n}.</b><br>I am Robo-Coach. This level is your introduction to Python's print output‚Äîguiding you as you build a text-based restaurant menu, step-by-step. I'll explain every concept you need!` :
        `<b>Hey ${n}!</b> I'm Robo-Coach, your coding sidekick! Let's create a cool restaurant menu right now. I'll show you how print works!`
    },
    "ü¶Ñ Debug the Unicorn": {
      emoji:"ü¶Ñ",
      greeting: (isMature, n) =>
        isMature ?
        `<b>Welcome, ${n}.</b><br>I'm Debug the Unicorn. At Level 1, you'll master how Python displays output‚Äîby building your own restaurant menu. I'll help you learn every step.` :
        `<b>Hiya, ${n}!</b> I'm Debug, your magical bug-fixer. Let's type our first restaurant menu. Ready to see your code print out fun stuff?`
    },
    "üßô‚Äç‚ôÇÔ∏è Code Wizard": {
      emoji:"üßô‚Äç‚ôÇÔ∏è",
      greeting: (isMature, n) =>
        isMature ?
        `<b>Salutations, ${n}.</b><br>I am Code Wizard, here to guide you. In this level, we'll explore Python's print statement as we craft a digital restaurant menu. Follow along‚ÄîI'll explain the magic behind every command!` :
        `<b>Hi ${n}! üßô‚Äç‚ôÇÔ∏è</b> I'm the Code Wizard! Let's conjure up a restaurant menu with code. Get ready to use print() and create something awesome!`
    }
  }
  const levelIntroTexts = {
    mature: `
      <b>What you'll learn in Level 1:</b><br>
      This module introduces you to the fundamental way Python displays output: the <code>print()</code> function. You'll see how to format and display your own custom text directly in the program output.<br>
      <b>Activity:</b> You'll be guided step-by-step to create a simple, text-based restaurant menu using Python‚Äîsee your choices printed just like a real user interface!<br>
      Even if you've never coded before, you'll have all the information you need. Let's get started below!
    `,
    kid: `
      <b>What is Level 1 all about?</b><br>
      In this first PyQuest adventure, you'll learn how to make your computer talk by using a magic word in Python: <code>print()</code>!<br>
      You'll follow the mascot to make your very own restaurant menu show up onscreen, full of tasty choices.<br>
      No worries if you've never coded‚ÄîI'll help you every step! Ready to see your computer say what YOU want?
    `
  };
  const learningContent = {
    "watching videos": {
      html: `
      <div class="video-tile" title="Watch a quick coding video">
        <iframe src="https://www.youtube.com/embed/rfscVS0vtbw?start=16&end=104" allowfullscreen title="Intro to Python for Beginners"></iframe>
      </div>
      <div class="info-box speech-bubble">
        <b>See how it's done:</b> The video above quickly shows what <code>print()</code> does. Watch how the instructor types <code>print("Hello, world!")</code> and the result appears below the code.
      </div>
      `,
      explain: (isMature) =>
        isMature
        ? `<b>Developer Tip:</b> Observe not just what appears, but how the instructor selects, edits, and checks their code for accuracy. Use this as a model for your own rigorous practice.`
        : `<b>Tip:</b> Watch and copy the video! Try typing what they type to see your own results.`
    },
    "playing games": {
      html: `
      <div class="mini-game-container" id="prGame">
        <b>üïπÔ∏è Mini-Game: Restaurant Menu!</b><br>
        <span>Write a <code>print()</code> statement to build your own menu for a pretend restaurant. Ready to code the menu together?</span>
        <br><br>
        <textarea id="gameMenuCode" style="display:block;margin:10px auto;min-width:170px;font-family:monospace;font-size:1.07em;" rows="2" placeholder='print("1. Start Adventure")'></textarea>
        <button class="example-btn" onclick="menuGameTry()">Show Menu</button>
        <div id="gameMenuOutput" style="margin-top:13px;min-height:28px;color:black;font-family:monospace;"></div>
      </div>
      `,
      explain: (isMature) =>
        isMature
        ? `In applications, printed output is foundational for interfaces. Simulate your own menu system‚Äîorganized and user-friendly.`
        : `Menus make restaurants fun! Code your own using print and watch the choices appear!`
    },
    "solving puzzles": {
      html: `
      <div class="mini-game-container">
        <b>ü§î Puzzle Challenge!</b><br>
        <span>Can you fix this broken code so it prints "Welcome to PyQuest!"?</span>
        <br>
        <textarea id="puzzleCode" style="margin:12px auto;min-width:190px;display:block;font-family:monospace;font-size:1.07em;" rows="1">print(Welcome to PyQuest!)</textarea>
        <button class="example-btn" onclick="solvePuzzle1()">Check</button>
        <div id="puzzleFeedback" style="margin-top:10px;min-height:28px;font-weight:500;"></div>
      </div>
      `,
      explain: (isMature) =>
        isMature
        ? `Finding and correcting syntax errors (like missing quotes) is essential in programming. Practice now and strengthen your Python fundamentals.` :
        `Oops! Debug the code so it prints what you want. Don't forget the quotes in print!`
    },
    "reading stories": {
      html: `
      <div class="mini-game-container">
        <b>üìñ Story Mode:</b><br>
        <span>
        In Codeville, the mascot wants to welcome a new guest.<br>
        What line of Python code should he type to say <em>Hello, Brave Coder!</em>?
        </span>
        <textarea id="storyCode" rows="1" style="display:block;margin:10px auto 3px auto;min-width:200px;font-family:monospace;font-size:1.07em;" placeholder='YOUR CODE'></textarea>
        <button class="example-btn" onclick="checkStoryPrint()">Check Answer</button>
        <div id="storyFeedback" style="min-height:24px;margin-top:7px;"></div>
      </div>
      `,
      explain: (isMature) =>
        isMature
        ? `Programming is about clear communication‚Äîuse print to share messages with your users. Write your own greeting now.` :
        `Type what you want the fox to say! Use print and see your greeting show up.`
    },
    "hands-on making": {
      html: `
      <div class="mini-game-container">
        <b>üõ†Ô∏è Build Your Menu!</b><br>
        <span>
        Use <code>print()</code> to create the name of your own restaurant or lab. Let's make it appear on the menu!
        </span>
        <textarea id="makerCode" rows="1" style="display:block;margin:10px auto 3px auto;min-width:170px;font-family:monospace;font-size:1.07em;" placeholder='print("The Robotics Den")'></textarea>
        <button class="example-btn" onclick="showMakerSign()">Show Sign</button>
        <div id="makerOutput" style="margin-top:10px;min-height:30px;font-family:monospace;"></div>
      </div>
      `,
      explain: (isMature) =>
        isMature
        ? `Customize your menu header‚Äîpractice informational output, branding, and clarity with Python print statements.` :
        `Type your restaurant's name! See it appear with print.`
    }
  }
  function insertPersonalizedContent() {
    let p = userPrefs();
    let mascotObj = mascotData[p.mascot] || mascotData["ü§ñ Robo-Coach"];
    document.getElementById("mascotFace").textContent = mascotObj.emoji;
    document.getElementById("mascotGreeting").innerHTML = mascotObj.greeting(p.isMature, p.name);
    document.getElementById("levelTitle").textContent = p.isMature ? "Level 1: Output and Printing in Python üñ®Ô∏è" : "Level 1: Print Power! üñ®Ô∏è";
    document.getElementById("levelIntro").innerHTML = p.isMature ? levelIntroTexts.mature : levelIntroTexts.kid;
    let lstyle = p.style || "playing games";
    let section = learningContent[lstyle];
    let customDiv = document.getElementById("customContent");
    customDiv.innerHTML = (section && section.html) || "";
    document.getElementById("customPrintExplain").innerHTML = section && section.explain ? section.explain(p.isMature) :
      (p.isMature ? `<b>With print(), you present output to your user or to debug your code. Experiment‚Äîtype and run the samples below.` :
      `Change the message and press "Try it" to see what print does!`);
    document.getElementById("customPrintMore").innerHTML = p.isMature ?
      `Test different statements: output your name, a favorite number, or a structured menu item. Notice spacing and clarity in your output.` :
      `Print <b>anything you like</b>‚Äîlike your name, favorite food, or emoji! ü•óüò∏‚ú®`;
    document.getElementById("customFunFact").innerHTML = p.isMature ?
      `<b>Professional Insight:</b> <br>The <code>print()</code> function in Python displays text, numbers, or data structures. Use it for menus, debugging, or user messages. For example: <code>print("Today's Special:", "Pasta")</code>.` :
      `üí° <b>Did you know?</b><br> You can print numbers and do math too! Try typing <code>print(7 * 3)</code> above!<br>Click <b>Try it!</b> to see what happens!`;
    document.getElementById("miniQuestLabel").textContent = p.isMature ? "üìå Task:" : "üåü Mini-Quest:";
    document.getElementById("miniQuestPrompt").innerHTML = p.isMature ?
      `Type a <code>print()</code> statement that displays your name on the menu.<br><small>Example: <code>print("Olivia")</code></small>` :
      `Use <code>print()</code> to show your name!<br><small>(Start with <code>print(</code> and make sure your name is <b>inside quotes</b>!)</small>`;
  }
  window.onload = insertPersonalizedContent;
  window.menuGameTry = function() {
    const code = document.getElementById('gameMenuCode').value.trim();
    const out = document.getElementById('gameMenuOutput');
    if (/^print\s*\(\s*(['"]).+\1\s*\)\s*$/i.test(code)) {
      out.textContent = code.match(/^print\s*\(\s*(['"])([\s\S]*?)\1\s*\)$/)[2];
      out.style.color = "#277911";
    } else {
      out.textContent = "Make sure your menu is inside print and quotes!";
      out.style.color = "#ff4267";
    }
  }
  window.solvePuzzle1 = function() {
    const code = document.getElementById('puzzleCode').value.trim();
    if (/^print\s*\(\s*(['"])Welcome to PyQuest!\1\s*\)$/i.test(code)) {
      document.getElementById('puzzleFeedback').textContent = "Success! You fixed the print statement. üéâ";
      document.getElementById('puzzleFeedback').style.color = "#197d2c";
    } else {
      document.getElementById('puzzleFeedback').textContent = "Almost! Remember, put the message in quotes.";
      document.getElementById('puzzleFeedback').style.color = "#d63500";
    }
  }
  window.checkStoryPrint = function() {
    const val = document.getElementById('storyCode').value.trim();
    if (/^print\s*\(\s*(['"])Hello, Brave Coder!\1\s*\)\s*$/i.test(val)) {
      document.getElementById('storyFeedback').textContent = "Fizz is happy! Correct output accomplished. ‚ú®";
      document.getElementById('storyFeedback').style.color = "#197d2c";
    } else {
      document.getElementById('storyFeedback').textContent = "How would you make Fizz say hello? Use print and quotes!";
      document.getElementById('storyFeedback').style.color = "#d63500";
    }
  }
  window.showMakerSign = function() {
    const val = document.getElementById('makerCode').value.trim();
    const outbox = document.getElementById('makerOutput');
    if (/^print\s*\(\s*(['"]).+\1\s*\)\s*$/i.test(val)) {
      outbox.textContent = val.match(/^print\s*\(\s*(['"])([\s\S]*?)\1\s*\)$/)[2];
      outbox.style.color = "#197d2c";
    } else {
      outbox.textContent = "Put your sign name in quotes inside print!";
      outbox.style.color = "#d63500";
    }
  }
  (function () {
    const canvas = document.createElement('canvas');
    canvas.id = 'confettiCanvas';
    canvas.style.position = 'fixed';
    canvas.style.pointerEvents = 'none';
    canvas.style.top = '0'; canvas.style.left = '0';
    canvas.style.width = '100%';
    canvas.style.height = '100%';
    canvas.style.zIndex = '1000';
    document.body.appendChild(canvas);
    const ctx = canvas.getContext('2d');
    let W = window.innerWidth; let H = window.innerHeight;
    canvas.width = W; canvas.height = H;
    const confettiCount = 120; const confetti = [];
    function randomRange(min, max) { return Math.random() * (max - min) + min; }
    function Confetto() {
      this.x = Math.random() * W; this.y = Math.random() * H - H;
      this.r = randomRange(5, 10); this.d = (Math.random() * confettiCount) + 10;
      this.color = `hsl(${Math.floor(randomRange(0, 360))},70%,60%)`;
      this.tilt = randomRange(-10, 10); this.tiltAngle = 0; this.tiltAngleIncrement = randomRange(0.05, 0.1);
    }
    Confetto.prototype.draw = function () {
      ctx.beginPath(); ctx.lineWidth = this.r / 2; ctx.strokeStyle = this.color;
      ctx.moveTo(this.x + this.tilt + this.r / 4, this.y);
      ctx.lineTo(this.x + this.tilt, this.y + this.tilt + this.r / 4); ctx.stroke();
    };
    function initConfetti() { confetti.length = 0; for (let i = 0; i < confettiCount; i++) { confetti.push(new Confetto()); }}
    function draw() { ctx.clearRect(0, 0, W, H); for (let i = 0;i < confetti.length; i++) { confetti[i].draw(); } update();}
    function update() {
      for (let i = 0; i < confetti.length; i++) {
        let c = confetti[i]; c.tiltAngle += c.tiltAngleIncrement;
        c.y += (Math.cos(c.d) + 3 + c.r / 2) / 2; c.x += Math.sin(c.d);
        c.tilt = Math.sin(c.tiltAngle) * 15;
        if (c.y > H) { c.x = Math.random() * W; c.y = -10; }
      }
    }
    let animFrameId;
    function startConfetti() { if (!animFrameId) animFrameId = requestAnimationFrame(run);}
    function stopConfetti() {
      if (animFrameId) { cancelAnimationFrame(animFrameId); animFrameId = null; ctx.clearRect(0, 0, W, H);}
    }
    function run() { draw(); animFrameId = requestAnimationFrame(run);}
    window.confettiEffect = function (duration = 3000) { initConfetti(); startConfetti(); setTimeout(() => { stopConfetti(); }, duration);}
    window.addEventListener('resize', () => {W = window.innerWidth; H = window.innerHeight; canvas.width = W; canvas.height = H;});
  })();
</script>
</body>
</html>






