<!DOCTYPE html>
<html lang="en">
<head>
  <title>PyQuest Final Test: The Ultimate Challenge!</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="style.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Comic Sans MS', 'Comic Neue', cursive, sans-serif; }
    .finaltest-container {
      border: 5px solid gold;
      box-shadow: 0 0 24px 0 #ffd70099, 0 0 0 6px #fffbe7;
      background: linear-gradient(120deg, #fffbe7 80%, #ffe082 100%);
      position: relative;
      animation: glow 2s infinite alternate;
    }
    @keyframes glow {
      from { box-shadow: 0 0 24px 0 #ffd70099, 0 0 0 6px #fffbe7; }
      to { box-shadow: 0 0 48px 0 #ffd700cc, 0 0 0 6px #fffbe7; }
    }
    .finaltest-header {
      margin-bottom: 16px;
    }
    .finaltest-header .trophy {
      font-size: 2.2em;
      vertical-align: middle;
      margin-right: 10px;
      filter: drop-shadow(0 2px 4px #fbb03b);
      animation: bounce 1.2s infinite alternate;
    }
    @keyframes bounce {
      from { transform: translateY(0); }
      to { transform: translateY(-10px);}
    }
    .finaltest-intro {
      font-size: 1.2em;
      margin-bottom: 22px;
      background: linear-gradient(90deg, #ffe082 70%, #ffd54f 100%);
      border-radius: 16px;
      border: 2px solid #ffb300;
      padding: 16px 20px;
      color: #7a5600;
      box-shadow: 0 2px 12px #ffecb3aa;
      text-align: left;
      max-width: 520px;
      margin-left: auto;
      margin-right: auto;
    }
    .progress-bar-bg {
      width: 100%;
      background: #f9d976;
      border-radius: 14px;
      height: 18px;
      margin: 20px 0 30px 0;
      box-shadow: 0 2px 8px #ffd54faa;
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #ff5e62 0%, #fbb03b 100%);
      width: 0;
      border-radius: 14px;
      transition: width 0.4s;
    }
    .question-counter {
      font-size: 1.1em;
      margin-bottom: 10px;
      color: #ff9800;
      font-weight: bold;
      letter-spacing: 1px;
    }
    .confetti {
      pointer-events: none;
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 9999;
      overflow: hidden;
      display: none;
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      background-color: rgba(0,0,0,0.5);
      font-family: 'Comic Sans MS', cursive, sans-serif;
      text-align: center;
      padding: 40px 20px;
      box-sizing: border-box;
    }
    .modal-content {
      max-width: 600px;
      margin: 0 auto;
      border-radius: 20px;
      padding: 30px 24px;
      box-shadow: 0 0 40px #333;
      font-size: 1.3em;
      font-weight: bold;
      line-height: 1.5;
      position: relative;
      color: #fff;
      background: #222;
      transition: background 0.4s;
    }
    .modal-bad { background: #b71c1c !important; box-shadow: 0 0 40px #ff5252; }
    .modal-mid { background: #ff9800 !important; box-shadow: 0 0 40px #ffd54f; }
    .modal-good { background: #388e3c !important; box-shadow: 0 0 40px #a5d6a7; }
    .modal-content h2 {
      margin-top: 0;
      font-size: 2.2em;
      text-shadow: 2px 2px 8px #000;
    }
    .modal-content p {
      margin: 20px 0;
    }
    #closeModalBtn {
      margin-top: 30px;
      padding: 14px 40px;
      font-size: 1.2em;
      border: none;
      border-radius: 16px;
      background: linear-gradient(90deg, #ff8a80 80%, #ff5252 100%);
      color: white;
      cursor: pointer;
      box-shadow: 0 4px 16px #ff5252cc;
      transition: background 0.3s, transform 0.2s;
    }
    #closeModalBtn:hover {
      background: linear-gradient(90deg, #ff5252 80%, #ff8a80 100%);
      transform: scale(1.05) rotate(-1deg);
    }
    #badgeBtn {
      display:none;
      margin-top:20px;
      background:linear-gradient(90deg,#ffe082,#ffd54f);
      color:#b8860b;
      font-size:1.2em;
      font-weight:bold;
      border-radius:14px;
      padding:12px 32px;
      box-shadow:0 0 18px #ffd700cc;
      cursor:pointer;
      border:none;
      transition: background 0.3s, transform 0.2s;
    }
    #badgeBtn:hover {
      background:linear-gradient(90deg,#ffd54f,#ffe082);
      transform: scale(1.05) rotate(-1deg);
    }
  </style>
  <script>
    function isMobileDevice() {
      return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    }
    document.addEventListener('DOMContentLoaded', function() {
      if (isMobileDevice()) {
        document.body.style.fontFamily = "'Comic Neue', 'Comic Sans MS', cursive, sans-serif";
      } else {
        document.body.style.fontFamily = "'Comic Sans MS', 'Comic Neue', cursive, sans-serif";
      }
    });
  </script>
</head>
<body>
  <div class="quiz-container finaltest-container">
    <div class="finaltest-header">
      <span class="trophy">üèÜ</span>
      <h2 style="display:inline">Final Test: The Ultimate PyQuest Challenge!</h2>
    </div>
    <div class="finaltest-intro">
      <b>Welcome, brave coder!</b> This is your <span style="color:#ff5e62;font-weight:bold;">final test</span>‚Äîthe ultimate challenge covering everything you‚Äôve learned in PyQuest.<br>
      <ul style="margin: 10px 0 0 18px; text-align:left;">
        <li>15 questions, all topics</li>
        <li>Progress bar and live score</li>
        <li>Epic rewards for top scores!</li>
      </ul>
      <span style="color:#d4af37;font-weight:bold;">Give it your all‚Äîlet‚Äôs see if you‚Äôre a true Python champion!</span>
    </div>
    <div class="progress-bar-bg"><div class="progress-bar" id="progressBar"></div></div>
    <div class="question-counter" id="questionCounter">Question 1 of 15</div>
    <form id="finalTestQuiz" autocomplete="off">
      <div id="questionBlock"></div>
      <button type="button" class="button special" id="nextBtn">Next &rarr;</button>
      <button type="submit" class="button special" id="submitBtn" style="display:none;">Finish and See Results!</button>
    </form>
    <a href="index.html" class="button" style="margin-top:20px; display:inline-block;">üè† Back to Home</a>
  </div>

  <canvas class="confetti" id="confettiCanvas"></canvas>
  <div id="resultModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDesc">
    <div class="modal-content" id="modalContent">
      <h2 id="modalTitle">Your Quiz Results</h2>
      <p id="modalDesc"></p>
      <button id="badgeBtn">üéñÔ∏è Claim Your Badge!</button>
      <button id="closeModalBtn">Close</button>
    </div>
  </div>
  <script>
    // --------------- Quiz Data ---------------
    const questions = [
      {
        q: 'What does <code>print("Hello, PyQuest!")</code> do?',
        a: [
          "Prints Hello, PyQuest!",
          'Prints <code>print("Hello, PyQuest!")</code>',
          'Prints "Hello, PyQuest!"',
          "Error"
        ],
        correct: "a"
      },
      {
        q: "Which is a valid way to assign a value to a variable?",
        a: [
          "let x = 5",
          "x := 5",
          "x = 5",
          "int x = 5"
        ],
        correct: "c"
      },
      {
        q: 'What is the output of <code>print(3 + 4)</code>?',
        a: [
          "34",
          "7",
          "3 + 4",
          "Error"
        ],
        correct: "b"
      },
      {
        q: "Which data type would you use to store a list of animals?",
        a: [
          "int",
          "str",
          "list",
          "bool"
        ],
        correct: "c"
      },
      {
        q: 'What will this code print?<br><code>animal = "cat"<br>print("My favorite animal is a", animal)</code>',
        a: [
          "My favorite animal is a cat",
          "My favorite animal is a animal",
          "animal",
          "Error"
        ],
        correct: "a"
      },
      {
        q: 'What does the <code>input()</code> function do?',
        a: [
          "Outputs text to the screen",
          "Receives text from the user",
          "Adds two numbers",
          "Defines a variable"
        ],
        correct: "b"
      },
      {
        q: 'What is the result of this code if the user types <b>7</b>?<br><code>num = input("Enter a number: ")<br>print(num)</code>',
        a: [
          "7",
          '"7"',
          "Error",
          "Nothing"
        ],
        correct: "b"
      },
      {
        q: "Which operator is used for multiplication in Python?",
        a: [
          "x",
          "*",
          "X",
          "^"
        ],
        correct: "b"
      },
      {
        q: 'What does this code print?<br><code>for i in range(3):<br>&nbsp;&nbsp;print(i)</code>',
        a: [
          "1 2 3",
          "0 1 2",
          "0 1 2 3",
          "1 2"
        ],
        correct: "b"
      },
      {
        q: "How do you define a function in Python?",
        a: [
          "function myFunc():",
          "def myFunc():",
          "func myFunc():",
          "define myFunc():"
        ],
        correct: "b"
      },
      {
        q: 'What will this function print when called?<br><code>def greet():<br>&nbsp;&nbsp;print("Hello!")<br>greet()</code>',
        a: [
          "greet",
          "Hello!",
          "def greet():",
          "Error"
        ],
        correct: "b"
      },
      {
        q: "Which of these is a correct way to create a list in Python?",
        a: [
          "mylist = (1, 2, 3)",
          "mylist = [1, 2, 3]",
          "mylist = {1, 2, 3}",
          "mylist = <1, 2, 3>"
        ],
        correct: "b"
      },
      {
        q: 'What does this code print?<br><code>colors = ["red", "blue", "green"]<br>print(colors[1])</code>',
        a: [
          "red",
          "blue",
          "green",
          "1"
        ],
        correct: "b"
      },
      {
        q: 'What is the output of this code?<br><code>person = {"name": "Sam", "age": 10}<br>print(person["name"])</code>',
        a: [
          "Sam",
          '"name"',
          "person",
          "Error"
        ],
        correct: "a"
      },
      {
        q: "What is a class in Python used for?",
        a: [
          "To repeat code",
          "To store a sequence of items",
          "To define a blueprint for objects",
          "To print text"
        ],
        correct: "c"
      }
    ];
    const rainbowClasses = ['rainbow-choice rainbow1', 'rainbow-choice rainbow2', 'rainbow-choice rainbow3', 'rainbow-choice rainbow4', 'rainbow-choice rainbow5', 'rainbow-choice rainbow6'];
    let currentQ = 0;
    let userAnswers = Array(questions.length).fill(null);

    function renderQuestion() {
      const q = questions[currentQ];
      let html = `<p><b>${currentQ+1}. ${q.q}</b></p>`;
      for (let i = 0; i < q.a.length; i++) {
        const letter = String.fromCharCode(97 + i); // a, b, c, d
        const checked = userAnswers[currentQ] === letter ? "checked" : "";
        html += `<label class="${rainbowClasses[i % rainbowClasses.length]}"><input type="radio" name="q${currentQ+1}" value="${letter}" ${checked}> ${q.a[i]}</label><br>`;
      }
      document.getElementById("questionBlock").innerHTML = html;
      document.getElementById("questionCounter").textContent = `Question ${currentQ+1} of ${questions.length}`;
      document.getElementById("progressBar").style.width = `${((currentQ)/questions.length)*100}%`;
      document.getElementById("nextBtn").style.display = (currentQ < questions.length - 1) ? "" : "none";
      document.getElementById("submitBtn").style.display = (currentQ === questions.length - 1) ? "" : "none";
    }
    document.getElementById("finalTestQuiz").addEventListener("change", function(e) {
      if (e.target.name === `q${currentQ+1}`) {
        userAnswers[currentQ] = e.target.value;
      }
    });
    document.getElementById("nextBtn").onclick = function() {
      if (!userAnswers[currentQ]) {
        alert("Please select an answer before continuing!");
        return;
      }
      currentQ++;
      renderQuestion();
    };
    document.getElementById("finalTestQuiz").addEventListener("submit", function(e) {
      e.preventDefault();
      if (!userAnswers[currentQ]) {
        alert("Please select an answer before submitting!");
        return;
      }
      let score = 0;
      for (let i = 0; i < questions.length; i++) {
        if (userAnswers[i] === questions[i].correct) score++;
      }
      let message = "";
      let modalClass = "modal-content";
      let badgeBtn = document.getElementById("badgeBtn");
      badgeBtn.style.display = "none";
      if (score <= 5) {
        message = "üò¨ <b>Keep practicing!</b> You'll get there!";
        modalClass += " modal-bad";
      } else if (score <= 10) {
        message = "üëç <b>Good effort!</b> Review a few topics and try again!";
        modalClass += " modal-mid";
      } else {
        message = "üéâ <b>Great job!</b> You really know your Python basics!";
        modalClass += " modal-good";
        if (score === 15) {
          message = "üèÜ <b>Perfect!</b> You're a PyQuest Master!<br>Confetti for you!";
          launchConfetti();
          badgeBtn.style.display = "inline-block";
        }
      }
      const modal = document.getElementById('resultModal');
      const modalContent = document.getElementById('modalContent');
      modalContent.className = modalClass;
      modalContent.querySelector('p').innerHTML = `Score: <b>${score} / 15</b><br>${message}`;
      modal.style.display = 'block';
      document.getElementById("finalTestQuiz").querySelectorAll("input,button").forEach(el => el.disabled = true);
      document.getElementById("progressBar").style.width = "100%";
    });
    document.getElementById('closeModalBtn').addEventListener('click', () => {
      document.getElementById('resultModal').style.display = 'none';
      window.scrollTo({top: 0, behavior: 'smooth'});
    });
    document.getElementById('badgeBtn').onclick = function() {
      window.location.href = "badge.html";
    };
    renderQuestion();
    function launchConfetti() {
      const canvas = document.getElementById('confettiCanvas');
      canvas.style.display = "block";
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      let pieces = [];
      for (let i = 0; i < 120; i++) {
        pieces.push({
          x: Math.random() * canvas.width,
          y: Math.random() * -canvas.height,
          r: Math.random() * 8 + 4,
          c: `hsl(${Math.random()*360},90%,60%)`,
          d: Math.random() * 2 + 1
        });
      }
      let frame = 0;
      function draw() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        for (let p of pieces) {
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r, 0, 2 * Math.PI);
          ctx.fillStyle = p.c;
          ctx.fill();
          p.y += p.d + Math.sin(frame/10 + p.x/100)*2;
          p.x += Math.sin(frame/20 + p.y/80)*2;
          if (p.y > canvas.height) p.y = -10;
        }
        frame++;
        if (frame < 180) requestAnimationFrame(draw);
        else canvas.style.display = "none";
      }
      draw();
    }
  </script>
</body>
</html>


